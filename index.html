<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Alt Text Updater ‚Äî Simple Mode</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./assets/style.css">
  <script defer src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/file-saver@2.0.5/dist/FileSaver.min.js"></script>
  <script defer src="./assets/app.js"></script>
</head>
<body>
<div class="app">
  <aside class="sidebar">
    <div class="brand">
      <div class="mark">ATU</div>
      <div class="title">Alt Text Updater</div>
    </div>
    <nav class="menu">
      <div class="menu-item active" data-step="1"><span class="dot">1</span> Upload CSV</div>
      <div class="menu-item" data-step="2"><span class="dot">2</span> Choose JSON folder</div>
      <div class="menu-item" data-step="3"><span class="dot">3</span> Run preview</div>
      <div class="menu-item" data-step="4"><span class="dot">4</span> Apply & download</div>
    </nav>
    <div class="plan">
      <div class="plan-title">Safe Mode</div>
      <div class="plan-text">Preview only. Your files are never changed.</div>
    </div>
    <div class="foot">v1.2 ‚Ä¢ Built for non‚Äëcoders</div>
  </aside>

  <main class="main">
    <header class="top">
      <div class="search">
        <input id="filterInput" type="text" placeholder="Search results by file, link, or alt‚Ä¶">
        <button id="btnClear" class="btn ghost small">Clear</button>
      </div>
      <div class="top-actions">
        <button id="btnPreview" class="btn primary" disabled>Run preview</button>
        <button id="btnApply" class="btn success" disabled>Apply & download</button>
        <button id="btnReports" class="btn" disabled>Download reports</button>
        <button id="btnReset" class="btn ghost">Reset</button>
      </div>
    </header>

    <section class="hero card">
      <div class="hero-left">
        <h1>No coding needed.</h1>
        <p class="muted">Upload your <b>CSV</b>, choose your <b>jsonFiles</b> folder, then preview and download updated files. It‚Äôs safe and fully client‚Äëside.</p>
        <ul class="steps">
          <li><b>Step 1:</b> Upload CSV (2 columns: <code>path,alt</code> ‚Ä¢ or 3 columns: <code>new_rel,alt,orig_path</code>)</li>
          <li><b>Step 2:</b> Pick your <code>jsonFiles/</code> folder</li>
          <li><b>Step 3:</b> Click <b>Run preview</b> to see proposed changes</li>
          <li><b>Step 4:</b> Click <b>Apply & download</b> to get a ZIP with updated files</li>
        </ul>
        <div class="toggles">
          <label class="toggle">
            <input id="toggleRewrite" type="checkbox">
            <span></span>
            <div>Also update image <code>src</code> when your CSV has 3 columns</div>
          </label>
          <label class="toggle">
            <input id="toggleBackup" type="checkbox" checked>
            <span></span>
            <div>Include a backup of originals in the ZIP</div>
          </label>
        </div>
      </div>
      <div class="hero-right">
        <div class="uploader">
          <div class="uploader-block">
            <div class="label">CSV</div>
            <label class="drop" id="csvDrop">
              <input id="csvInput" type="file" accept=".csv,text/csv" hidden>
              <div class="drop-inner">
                <div class="icon">üìÑ</div>
                <div class="text">
                  <strong id="csvName">Drop or click to upload CSV</strong>
                  <div class="hint">We‚Äôll read it in your browser.</div>
                </div>
              </div>
            </label>
            <div class="mini-stats">
              <div><span class="k">Rows</span><span id="statRows" class="v">0</span></div>
              <div><span class="k">Mode</span><span id="statMode" class="v">‚Äî</span></div>
              <div><span class="k">Alts</span><span id="statAlts" class="v">0</span></div>
            </div>
          </div>

          <div class="uploader-block">
            <div class="label">jsonFiles folder</div>
            <label class="drop">
              <input id="folderInput" type="file" webkitdirectory directory multiple hidden>
              <div class="drop-inner">
                <div class="icon">üìÅ</div>
                <div class="text">
                  <strong id="folderName">Pick your jsonFiles/ directory</strong>
                  <div class="hint">Only .json files are read.</div>
                </div>
              </div>
            </label>
            <div class="mini-stats">
              <div><span class="k">Files</span><span id="statFiles" class="v">0</span></div>
              <div><span class="k">Scanned</span><span id="statScanned" class="v">0%</span></div>
              <div><span class="k">Updated</span><span id="statUpdated" class="v">0</span></div>
            </div>
            <div id="progress" class="progress hidden">
              <div class="bar"><div id="bar" style="width:0%"></div></div>
              <div id="pct" class="pct">0%</div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="dashboard">
      <div class="col col-main">
        <div class="card">
          <div class="card-head">
            <div class="card-title">Preview results</div>
            <div class="muted" id="resultCount">Showing 0 of 0</div>
          </div>
          <div class="table">
            <div class="thead">
              <div>JSON file</div>
              <div>Old link</div>
              <div>Rewritten</div>
              <div>New alt</div>
            </div>
            <div id="tbody" class="tbody"></div>
          </div>
        </div>
      </div>
      <div class="col col-side">
        <div class="card">
          <div class="card-head"><div class="card-title">At a glance</div></div>
          <div class="stats">
            <div class="stat"><div class="k">Scanned</div><div id="ovScanned" class="v">0</div></div>
            <div class="stat"><div class="k">Changed files</div><div id="ovChanged" class="v">0</div></div>
            <div class="stat"><div class="k">Updates</div><div id="ovUpdates" class="v">0</div></div>
          </div>
          <div class="help">
            <div class="help-title">What will change?</div>
            <p>We look for images in your JSON and add descriptive alt text. If you enable ‚ÄúUpdate <code>src</code>‚Äù, we‚Äôll also swap the link when your CSV provides a new path.</p>
            <div class="help-title">How do we match images?</div>
            <p>Exact <code>orig_path</code> ‚Üí original file name ‚Üí path ‚Üí file name ‚Üí a simplified ‚Äúslug‚Äù of the name.</p>
            <div class="help-title">Why is this safe?</div>
            <p>Everything runs in your browser. Use the ZIP to download changes‚Äîyour originals remain untouched.</p>
          </div>
        </div>
      </div>
    </section>
  </main>
</div>
</body>
</html>
